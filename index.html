<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero Estadístico - Ráfagas</title>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- PapaParse -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

    <!-- SheetJS para descargar Excel -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

    <!-- Leaflet Mapa -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link rel="stylesheet" href="styles.css">
</head>

<body>

<header>
    <h1>Tablero Estadístico - Ráfagas</h1>
</header>

<!-- Filtros -->
<section class="panel">
    <h2>Filtros</h2>

    <label><b>Desde:</b></label>
    <input type="date" id="desde">

    <label><b>Hasta:</b></label>
    <input type="date" id="hasta">

    <button id="btnFiltrar">Aplicar filtros</button>
    <button id="btnReset">Resetear</button>
    <button id="btnDescargar">Descargar Excel</button>
</section>

<!-- Selector de variable -->
<section class="panel">
    <label><b>Variable a analizar:</b></label>
    <select id="variableSelect"></select>
</section>

<!-- Estadísticos -->
<section class="stats">
    <h2>Estadísticos</h2>

    <div class="grid">
        <div class="card"><h3>Media</h3><p id="statMedia"></p></div>
        <div class="card"><h3>Mediana</h3><p id="statMediana"></p></div>
        <div class="card"><h3>Máx</h3><p id="statMax"></p></div>
        <div class="card"><h3>Mín</h3><p id="statMin"></p></div>
        <div class="card"><h3>P90</h3><p id="statP90"></p></div>
        <div class="card"><h3>Varianza</h3><p id="statVar"></p></div>
    </div>
</section>

<!-- Gráficos -->
<section class="graficos">
    <h2>Serie Temporal</h2>
    <canvas id="chartLinea"></canvas>

    <h2>Barras</h2>
    <canvas id="chartBarras"></canvas>

    <h2>Histograma</h2>
    <canvas id="chartHist"></canvas>
</section>

<!-- Mapa -->
<section>
    <h2>Mapa de Eventos</h2>
    <div id="map" style="height: 400px;"></div>
</section>

<!-- Tabla -->
<section class="tabla">
    <h2>Datos Crudos</h2>
    <table id="tablaDatos"></table>
</section>

<script src="app.js"></script>
</body>
</html>
